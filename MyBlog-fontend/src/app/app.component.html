<div id="main">

  <h1 class="display-4">
    The Tech Noob's Blog
  </h1>

  <hr>

  <!-- Section for creating a new blog post. -->
  <div id="create_post">
    <h1>Create New Post</h1>
    <form (ngSubmit)="doPostOnSubmit()" #postForm="ngForm">
      <div class="form-group">
        <label for="name"></label><br />
        <textarea id="textareaNewPost" rows="3" class="form-control" id="content" name="content"
          [(ngModel)]="formContent" placeholder="Enter Content Here:" required></textarea><br />
        <button type="submit" class="btn btn-success" [disabled]="!postForm.form.valid">Submit</button>
      </div>
    </form>
  </div>
  <hr>

  <!-- Filter options section. -->
  <div id="filter_section">
    <h1>Filter Options:</h1>
    <h3>Date Range:
      <input type="text" [(ngModel)]="filterSettings.date_start_str">
      <input type="text" [(ngModel)]="filterSettings.date_end_str">
    </h3>
    <button class="btn btn-primary" (click)="syncFilterDataObject()">Filter</button>
    <br />
  </div>


  <hr>
  <div id="filter_section">
    <h1>Mass Operations</h1>
    <button class="btn btn-primary" (click)="setAllPostsEdit()">Edit All</button>
    <button class="btn btn-primary" (click)="setAllPostsView()">View All</button>
  </div>
  <hr>

  <!-- Make sure there is content loaded before rendering anything. -->
  <span *ngIf="allYears[0] != undefined">

    <!-- Pagination Component -->
    <nav id="pagination-nav" aria-label="Page navigation example">
      <ul class="pagination">

        <li class="page-item disabled">
          <a class="page-link" href="#pagination-nav" tabindex="-1">Previous</a>
        </li>

        <div *ngFor="let item of getPaginationIndexes()">
          <li class="page-item">
            <a class="page-link" href="#pagination-nav" (click)="filterSettings.page_index = item">{{item+1}}</a>
          </li>
        </div>

        <li class="page-item">
          <a class="page-link" href="#pagination-nav">Next</a>
        </li>
      </ul>
    </nav>

    <!-- Page Results Filter Drop-down -->
    <div class="dropdown">
      <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        Page Results
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" (click)="filterSettings.resultLimit = 5; filterSettings.page_index = 0;">5</a>
        <a class="dropdown-item" (click)="filterSettings.resultLimit = 10; filterSettings.page_index = 0;">10</a>
        <a class="dropdown-item" (click)="filterSettings.resultLimit = 25; filterSettings.page_index = 0;">25</a>
        <a class="dropdown-item" (click)="filterSettings.resultLimit = 100; filterSettings.page_index = 0;">100</a>
      </div>
    </div>

    <!-- Container for all posts. -->
    <div id="post-container" *ngFor="let year of allYears">
      <div *ngFor="let month of getKeys(filteredPostDataObject[year])">
        <div *ngFor="let day of getReversedKeys(filteredPostDataObject[year][month])">
          <h1>{{month}} {{getFormattedDay(day)}}, {{year}}</h1>

          <div *ngFor="let dayData of getFilteredData(year, month, day)">

            <div class="card">
              <div class="card-body">

                <span *ngIf="dayData['displayMode'] == 'view'" (click)='dayData["displayMode"] = "edit"'>
                  <h5 class="card-title">{{ getFormattedTime(dayData['date']) }} in
                    {{ getFormattedCategory(dayData['category']) }}</h5>
                  <p class="card-text">{{ dayData['content'] }}</p>
                </span>

                <span *ngIf="dayData['displayMode'] == 'edit'">

                  <h5 class="card-title">{{ getFormattedTime(dayData['date']) }} in
                    {{ getFormattedCategory(dayData['category']) }}</h5>
                  <textarea class="post_edit_textarea" value="{{dayData['content']}}"
                    [(ngModel)]="dayData['content']"></textarea><br />

                  <button type="submit" class="btn btn-primary" (click)='performSave(dayData)'>Save</button>
                  <button type="submit" class="btn btn-warning"
                    (click)='dayData["displayMode"] = "view"'>Cancel</button>
                  <button type="submit" class="btn btn-danger"
                    (click)='doDeleteRemovePost(dayData["_id"])'>Delete</button>

                </span>

              </div>
            </div>

          </div>

        </div>
      </div>
    </div>

  </span>

  <!-- About Me Section -->
  <hr>
  <div id="about_me">
    <h3>About the Tech Noob</h3>
    <p>
      My name is Donald Abdullah-Robinson and this blog is about my never-ending journey toward self-improvement. I
      have
      a year of experience
      as a Junior Software Engineer and am currently a Software Design Engineer. This blog's purpose is to discuss
      everything relating to my own
      journey toward self-improvement.
    </p>
  </div>

  <hr>

  <div id="footer">
    <h3>Explore My Work</h3>
    <button class="btn btn-primary">LinkedIn</button>
    <button class="btn btn-primary">Portfolio</button>
    <button class="btn btn-primary">Github</button>
    <button class="btn btn-primary">FCC</button>
    <button class="btn btn-primary">CodeSignal</button>
  </div>

  <hr>
</div>
